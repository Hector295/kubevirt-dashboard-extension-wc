(("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_303_0_2_up1_3_2"]=("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_303_0_2_up1_3_2"]||[]).push([[715],{10338:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var o=a(9274);const s={class:"state"};function r(e,t,a,r,n,i){const l=(0,o.resolveComponent)("BadgeStateFormatter"),c=(0,o.resolveComponent)("VDropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("span",null,[(0,o.withDirectives)((0,o.createElementVNode)("div",s,[(0,o.createVNode)(l,{row:a.row},null,8,["row"]),i.warningMessage.length?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,trigger:"hover",offset:"16"},{popover:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.warningMessage,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:e},(0,o.toDisplayString)(t+1)+". "+(0,o.toDisplayString)(e),1)))),128))])),default:(0,o.withCtx)((()=>[t[0]||(t[0]=(0,o.createElementVNode)("span",{class:"tooltip-target"},[(0,o.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"})],-1))])),_:1})):(0,o.createCommentVNode)("",!0)],512),[[o.vShow,!n.isMigrating]])])}var n=a(617),i={components:{BadgeStateFormatter:n.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1}},computed:{networkImpassability(){const e=this.row?.nodeName,t=this.allNodeNetwork.find((t=>t.attachNodeName===e));return(!!t?.message||!this.enableClusterNetwork)&&this.row?.attachNetwork&&"Running"===this?.row?.actualState},enableClusterNetwork(){const e=this.allClusterNetwork?.[0]||{};return e?.enable},warningMessage(){const e=[];if(this.networkImpassability&&this.allClusterNetwork.length&&e.push(this.t("kubevirt.network.message.vlanInactive",{name:this.row.realAttachNodeName})),this.row.warningMessage?.pod){const t=this.row.warningMessage.pod;t.metadata?.state?.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(t.metadata?.state?.message)&&e.push(t.metadata?.state?.message)}return"VM error"===this.row?.actualState&&this.row.warningMessage?.message&&e.push(this.row.warningMessage?.message),this.row?.migrationMessage&&e.push(this.row?.migrationMessage.message),e}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e}}},l=(a(74039),a(47433));const c=(0,l.A)(i,[["render",r],["__scopeId","data-v-c9f308c6"]]);var d=c},3508:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var o=a(9274);const s={key:1},r={class:"state"},n={class:"name-console"},i={key:1};function l(e,t,a,l,c,d){const u=(0,o.resolveComponent)("Loading"),p=(0,o.resolveComponent)("VMState"),m=(0,o.resolveComponent)("LinkDetail"),h=(0,o.resolveComponent)("ConsoleBar"),w=(0,o.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0})):((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(w,(0,o.mergeProps)(e.$attrs,{headers:d.headers,"default-sort-by":"age",rows:d.rows,schema:a.schema,groupable:!0,"table-actions":d.tableActions,"key-field":"_key"}),{"cell:state":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",r,[(0,o.createVNode)(p,{class:"vmstate",row:e.row},null,8,["row"])])])),"cell:name":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",n,["kubevirt.io.virtualmachineinstance"!==e.row.type?((0,o.openBlock)(),(0,o.createBlock)(m,{key:0,value:e.row.metadata.name,"onUpdate:value":t=>e.row.metadata.name=t,row:e.row},null,8,["value","onUpdate:value","row"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",i,(0,o.toDisplayString)(e.row.metadata.name),1)),(0,o.createVNode)(h,{"resource-type":e.row,class:"console mr-10"},null,8,["resource-type"])])])),_:1},16,["headers","rows","schema","table-actions"])]))}var c=a(8166),d=a(88057),u=a(10338),p=a(14848),m=a(63558),h=a(21075),w=a(53922);const v={class:"overview-web-console"};function f(e,t,a,s,r,n){const i=(0,o.resolveComponent)("ButtonDropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createVNode)(i,{disabled:n.isOff,"no-drop":n.isOff,"button-label":"Console","dropdown-options":n.options,size:"sm",onClickAction:n.handleDropdown},null,8,["disabled","no-drop","dropdown-options","onClickAction"])])}var g=a(33e3),y=a(65359),k={name:"VMConsoleBar",components:{ButtonDropdown:g.A},props:{resourceType:{type:Object,required:!0,default:()=>({})}},computed:{...(0,y.L8)({t:"i18n/t"}),isOff(){return"Stopped"===this.resourceType.stateDisplay||"Off"===this.resourceType.stateDisplay},options(){return[{label:this.t("kubevirt.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("kubevirt.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){const t=this.resourceType.id,a=window.location.host,o=window.location.pathname.replace(this.$route.path,""),s=this.$route?.params,r=`https://${a}${o}/${s.product}/c/${s.cluster}/console/${t}/${e}`;window.open(r,"_blank",`toolbars=0,width=${screen.width-200},height=${screen.height-200},left=0,top=0,noreferrer`)},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},b=(a(41998),a(47433));const M=(0,b.A)(k,[["render",f]]);var C=M,_=a(92598),N={name:"VirtualMachineList",components:{Loading:h.A,VMState:u["default"],LinkDetail:d.A,ConsoleBar:C,ResourceTable:c.A},props:{schema:{type:Object,required:!0}},data(){return{allVMs:[],allVMIs:[]}},async fetch(){const e=[_.zl,_.Mm,w.NW,w.Sm],t=e.reduce(((e,t)=>(this.$store.getters["cluster/schemaFor"](t)&&(e[t]=this.$store.dispatch("cluster/findAll",{type:t})),e)),{}),a=await(0,m.kR)(t);this.allVMs=a[_.zl]||[],this.allVMIs=a[_.Mm]||[]},computed:{headers(){return[p.c4,p.o_,p.CU,{name:"RunStrategy",label:"Run Strategy",value:"spec.runStrategy",dashIfEmpty:!0},{name:"vCPU",label:"vCPU",sort:["vCPUs"],value:"vCPUs",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"IPAddress",labelKey:"tableHeaders.ipAddress",dashIfEmpty:!0},{name:"node",labelKey:"tableHeaders.node",value:"nodeName",formatter:"LinkName",formatterOpts:{type:w.NW},dashIfEmpty:!0},{...p.K,sort:"metadata.creationTimestamp:desc"}]},rows(){const e=this.allVMIs.filter((e=>!this.allVMs.find((t=>t.id===e.id))));return[...this.allVMs,...e]},tableActions(){return[{action:"editVM",label:"Edit",icon:"icon icon-edit",enabled:e=>"kubevirt.io.virtualmachineinstance"!==e.type}]}},methods:{editVM(e){this.$router.push({name:"c-cluster-product-resource-id",params:{cluster:this.$route.params.cluster,product:"kubevirt",resource:"kubevirt.io.virtualmachine",id:e.id},query:{mode:"edit"}})}}};a(67151);const V=(0,b.A)(N,[["render",l],["__scopeId","data-v-3ee1e49c"]]);var x=V},87342:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),r=a(40935),n=a.n(r),i=n()(s());i.push([e.id,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),t["default"]=i},22615:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),r=a(40935),n=a.n(r),i=n()(s());i.push([e.id,".state[data-v-c9f308c6]{display:flex;justify-content:space-between}.state .icon-warning[data-v-c9f308c6]{margin-top:2px}",""]),t["default"]=i},21775:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),r=a(40935),n=a.n(r),i=n()(s());i.push([e.id,".state[data-v-3ee1e49c]{display:flex}.state .vmstate[data-v-3ee1e49c]{margin-right:6px}.name-console[data-v-3ee1e49c]{align-items:center;display:flex;justify-content:space-around}.name-console span[data-v-3ee1e49c]{line-height:26px;width:160px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis}",""]),t["default"]=i},41998:function(e,t,a){var o=a(87342);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("3c892a7a",o,!0,{sourceMap:!1,shadowMode:!1})},74039:function(e,t,a){var o=a(22615);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("40cef760",o,!0,{sourceMap:!1,shadowMode:!1})},67151:function(e,t,a){var o=a(21775);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("36684178",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=kubevirt-dashboard-extension-303.0.2+up1.3.2.umd.min.list.js.map