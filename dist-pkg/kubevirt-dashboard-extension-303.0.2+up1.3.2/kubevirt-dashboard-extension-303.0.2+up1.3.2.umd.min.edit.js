(("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_303_0_2_up1_3_2"]=("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_303_0_2_up1_3_2"]||[]).push([[739],{63827:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return dt}});var o=a(9274);const s={class:"row mb-20"},l={class:"col span-6"},n={class:"col span-6"};function i(e,t,a,i,r,c){const d=(0,o.resolveComponent)("Loading"),m=(0,o.resolveComponent)("NameNsDescription"),u=(0,o.resolveComponent)("Checkbox"),p=(0,o.resolveComponent)("LabeledInput"),v=(0,o.resolveComponent)("VMBasicConfig"),h=(0,o.resolveComponent)("Tab"),k=(0,o.resolveComponent)("VMResourcesConfig"),b=(0,o.resolveComponent)("VMDiskConfig"),g=(0,o.resolveComponent)("VMNetworkConfig"),N=(0,o.resolveComponent)("Tabbed"),f=(0,o.resolveComponent)("CruResource");return a.value?((0,o.openBlock)(),(0,o.createBlock)(f,{key:1,"done-route":e.doneRoute,"can-yaml":!0,mode:a.mode,resource:a.value,errors:e.fvUnreportedValidationErrors,"validation-passed":e.fvFormIsValid,onError:t[3]||(t[3]=t=>e.errors=t),onFinish:e.save,onCancel:e.done},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m,{value:a.value,mode:a.mode,"description-hidden":!1,onInput:t[0]||(t[0]=t=>e.$emit("input",t))},null,8,["value","mode"]),(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(u,{value:c.vmRunning,"onUpdate:value":t[1]||(t[1]=e=>c.vmRunning=e),mode:a.mode,label:e.t("kubevirt.edit.vm.fields.running.label"),tooltip:e.t("kubevirt.edit.vm.fields.running.tooltip")},null,8,["value","mode","label","tooltip"])]),(0,o.createElementVNode)("div",n,[(0,o.createVNode)(p,{value:c.terminationGracePeriod,"onUpdate:value":t[2]||(t[2]=e=>c.terminationGracePeriod=e),type:"number",mode:a.mode,label:e.t("kubevirt.edit.vm.fields.terminationGracePeriod.label"),tooltip:e.t("kubevirt.edit.vm.fields.terminationGracePeriod.tooltip"),min:"0"},null,8,["value","mode","label","tooltip"])])]),(0,o.createVNode)(N,{"side-tabs":!0,onChanged:c.onTabChanged},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{name:"basic",label:e.t("kubevirt.edit.vm.tabs.basic.title"),weight:5,error:c.tabErrors.basic},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(v,{value:a.value,mode:a.mode},null,8,["value","mode"])])),_:1},8,["label","error"]),(0,o.createVNode)(h,{name:"resources",label:e.t("kubevirt.edit.vm.tabs.resources.title"),weight:4,error:c.tabErrors.resources},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{value:a.value,mode:a.mode,rules:e.fvGetAndReportPathRules},null,8,["value","mode","rules"])])),_:1},8,["label","error"]),(0,o.createVNode)(h,{name:"disks",label:e.t("kubevirt.edit.vm.tabs.disks.title"),weight:3},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{value:a.value,mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,o.createVNode)(h,{name:"network",label:e.t("kubevirt.edit.vm.tabs.network.title"),weight:2},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{value:a.value,mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"])])),_:1},8,["onChanged"])])),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])):((0,o.openBlock)(),(0,o.createBlock)(d,{key:0}))}var r=a(87290),c=a(44033),d=a(15952),m=a(74405),u=a(98134),p=a(6059),v=a(50915),h=a(91420),k=a(97305),b=a(56263),g=a(21075);const N={class:"row mb-20"},f={class:"col span-12"},y={class:"row mb-20"},V={class:"col span-12"},C={class:"col span-5"},w={class:"col span-5"},E={class:"col span-2"},M=["onClick"],D={class:"row mb-20"},x={class:"col span-12"},I={class:"col span-5"},T={class:"col span-5"},B={class:"col span-2"},A=["onClick"];function U(e,t,a,s,l,n){const i=(0,o.resolveComponent)("LabeledInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",N,[(0,o.createElementVNode)("div",f,[(0,o.createVNode)(i,{value:n.description,"onUpdate:value":t[0]||(t[0]=e=>n.description=e),mode:a.mode,label:"Description",placeholder:"Enter description",type:"multiline","min-height":60},null,8,["value","mode"])])]),(0,o.createElementVNode)("div",y,[(0,o.createElementVNode)("div",V,[t[3]||(t[3]=(0,o.createElementVNode)("h3",null,"Labels",-1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.vmLabels,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:`label-${t}`,class:"row mb-10"},[(0,o.createElementVNode)("div",C,[(0,o.createVNode)(i,{value:e.key,"onUpdate:value":t=>e.key=t,mode:a.mode,label:"Key",placeholder:"Enter key"},null,8,["value","onUpdate:value","mode"])]),(0,o.createElementVNode)("div",w,[(0,o.createVNode)(i,{value:e.value,"onUpdate:value":t=>e.value=t,mode:a.mode,label:"Value",placeholder:"Enter value"},null,8,["value","onUpdate:value","mode"])]),(0,o.createElementVNode)("div",E,[n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-link",onClick:e=>n.removeLabel(t)}," Remove ",8,M))])])))),128)),n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-tertiary",onClick:t[1]||(t[1]=(...e)=>n.addLabel&&n.addLabel(...e))}," Add Label "))])]),(0,o.createElementVNode)("div",D,[(0,o.createElementVNode)("div",x,[t[4]||(t[4]=(0,o.createElementVNode)("h3",null,"Annotations",-1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.vmAnnotations,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:`annotation-${t}`,class:"row mb-10"},[(0,o.createElementVNode)("div",I,[(0,o.createVNode)(i,{value:e.key,"onUpdate:value":t=>e.key=t,mode:a.mode,label:"Key",placeholder:"Enter key"},null,8,["value","onUpdate:value","mode"])]),(0,o.createElementVNode)("div",T,[(0,o.createVNode)(i,{value:e.value,"onUpdate:value":t=>e.value=t,mode:a.mode,label:"Value",placeholder:"Enter value"},null,8,["value","onUpdate:value","mode"])]),(0,o.createElementVNode)("div",B,[n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-link",onClick:e=>n.removeAnnotation(t)}," Remove ",8,A))])])))),128)),n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-tertiary",onClick:t[2]||(t[2]=(...e)=>n.addAnnotation&&n.addAnnotation(...e))}," Add Annotation "))])])])}var L=a(54396),S={name:"VMBasicConfig",components:{LabeledInput:k.LabeledInput},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{tempLabels:[],tempAnnotations:[]}},computed:{isView(){return"view"===this.mode},vmLabels:{get(){return this.tempLabels},set(e){this.tempLabels=e,this.syncLabelsToMetadata()}},vmAnnotations:{get(){return this.tempAnnotations},set(e){this.tempAnnotations=e,this.syncAnnotationsToMetadata()}},description:{get(){return(0,h.Jt)(this.value,"metadata.annotations.description")||""},set(e){if(e)(0,h.hZ)(this.value,"metadata.annotations.description",e);else{const e={...(0,h.Jt)(this.value,"metadata.annotations")};delete e.description,(0,h.hZ)(this.value,"metadata.annotations",e)}}}},created(){this.ensureMetadataStructure(),this.loadLabelsAndAnnotations()},methods:{ensureMetadataStructure(){this.value.metadata||(0,h.hZ)(this.value,"metadata",{}),this.value.metadata.labels||(0,h.hZ)(this.value,"metadata.labels",{}),this.value.metadata.annotations||(0,h.hZ)(this.value,"metadata.annotations",{})},loadLabelsAndAnnotations(){const e=(0,h.Jt)(this.value,"metadata.labels")||{},t={};Object.entries(e).forEach((([e,a])=>{e.startsWith("kubevirt.io/")||e.startsWith("cattle.io/")||(t[e]=a)})),this.tempLabels=Object.entries(t).map((([e,t])=>({key:e,value:t})));const a=(0,h.Jt)(this.value,"metadata.annotations")||{},o={};Object.entries(a).forEach((([e,t])=>{e.startsWith("kubevirt.io/")||e.startsWith("cattle.io/")||"description"===e||(o[e]=t)})),this.tempAnnotations=Object.entries(o).map((([e,t])=>({key:e,value:t})))},syncLabelsToMetadata(){const e=(0,h.Jt)(this.value,"metadata.labels")||{},t={};Object.entries(e).forEach((([e,a])=>{(e.startsWith("kubevirt.io/")||e.startsWith("cattle.io/"))&&(t[e]=a)}));const a={};this.tempLabels.forEach((({key:e,value:t})=>{e&&t&&e.trim()&&t.trim()&&(a[e.trim()]=t.trim())})),(0,h.hZ)(this.value,"metadata.labels",{...t,...a})},syncAnnotationsToMetadata(){const e=(0,h.Jt)(this.value,"metadata.annotations")||{},t={};Object.entries(e).forEach((([e,a])=>{(e.startsWith("kubevirt.io/")||e.startsWith("cattle.io/")||"description"===e)&&(t[e]=a)}));const a={};this.tempAnnotations.forEach((({key:e,value:t})=>{e&&t&&e.trim()&&t.trim()&&(a[e.trim()]=t.trim())})),(0,h.hZ)(this.value,"metadata.annotations",{...t,...a})},addLabel(){this.tempLabels.push({key:"",value:""})},removeLabel(e){this.tempLabels.splice(e,1),this.syncLabelsToMetadata()},addAnnotation(){this.tempAnnotations.push({key:"",value:""})},removeAnnotation(e){this.tempAnnotations.splice(e,1),this.syncAnnotationsToMetadata()}},watch:{tempLabels:{handler(){this.syncLabelsToMetadata()},deep:!0},tempAnnotations:{handler(){this.syncAnnotationsToMetadata()},deep:!0}}},q=(a(67359),a(47433));const Z=(0,q.A)(S,[["render",U],["__scopeId","data-v-cd433a6e"]]);var _=Z;const R={class:"row mb-20"},J={class:"col span-6"},O={class:"col span-3"},P={class:"col span-3"},G={class:"row mb-20"},F={class:"col span-6"},z={class:"col span-6"},$={class:"row mb-20"},j={class:"col span-6"},W={class:"col span-6"};function K(e,t,a,s,l,n){const i=(0,o.resolveComponent)("LabeledInput"),r=(0,o.resolveComponent)("LabeledSelect");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[t[7]||(t[7]=(0,o.createElementVNode)("div",{class:"row mb-20"},[(0,o.createElementVNode)("div",{class:"col span-12"},[(0,o.createElementVNode)("h3",null,"CPU and Memory Configuration"),(0,o.createElementVNode)("p",{class:"text-muted"},"Configure CPU and memory resources for the virtual machine")])],-1)),(0,o.createElementVNode)("div",R,[(0,o.createElementVNode)("div",J,[(0,o.createVNode)(i,{value:n.cpuCores,"onUpdate:value":t[0]||(t[0]=e=>n.cpuCores=e),type:"number",mode:a.mode,label:"CPU Cores",tooltip:"Number of virtual CPU cores (0.1-32) to allocate to the VM",min:"0.1",max:"32",step:"0.1",required:"",rules:a.rules("spec.template.spec.domain.cpu.cores")},null,8,["value","mode","rules"])]),(0,o.createElementVNode)("div",O,[(0,o.createVNode)(i,{value:n.memoryValue,"onUpdate:value":t[1]||(t[1]=e=>n.memoryValue=e),type:"number",mode:a.mode,label:"Memory",tooltip:"Amount of memory to allocate to the VM (minimum 128Mi recommended)",placeholder:"e.g., 1024",min:"128",rules:a.rules("spec.template.spec.domain.memory.guest")},null,8,["value","mode","rules"])]),(0,o.createElementVNode)("div",P,[(0,o.createVNode)(r,{value:n.memoryUnit,"onUpdate:value":t[2]||(t[2]=e=>n.memoryUnit=e),mode:a.mode,options:l.memoryUnits,label:"Unit",reduce:e=>e.value},null,8,["value","mode","options","reduce"])])]),t[8]||(t[8]=(0,o.createStaticVNode)('<div class="row mb-20" data-v-3326ab0b><div class="col span-12" data-v-3326ab0b><h3 data-v-3326ab0b>Resource Requests and Limits (Optional)</h3><p class="text-muted" data-v-3326ab0b>Configure resource requests and limits for Kubernetes scheduling</p></div></div><div class="row mb-20" data-v-3326ab0b><div class="col span-12" data-v-3326ab0b><h4 data-v-3326ab0b>Resource Requests</h4><p class="text-muted small" data-v-3326ab0b>Minimum resources that Kubernetes will guarantee</p></div></div>',2)),(0,o.createElementVNode)("div",G,[(0,o.createElementVNode)("div",F,[(0,o.createVNode)(i,{value:n.cpuRequest,"onUpdate:value":t[3]||(t[3]=e=>n.cpuRequest=e),mode:a.mode,label:"CPU Request",placeholder:"100m",tooltip:"CPU request in cores (e.g. 0.5) or millicores (e.g. 500m)"},null,8,["value","mode"])]),(0,o.createElementVNode)("div",z,[(0,o.createVNode)(i,{value:n.memoryRequest,"onUpdate:value":t[4]||(t[4]=e=>n.memoryRequest=e),mode:a.mode,label:"Memory Request",placeholder:"256Mi",tooltip:"Memory request (e.g. 256Mi, 1Gi)"},null,8,["value","mode"])])]),t[9]||(t[9]=(0,o.createElementVNode)("div",{class:"row mb-20"},[(0,o.createElementVNode)("div",{class:"col span-12"},[(0,o.createElementVNode)("h4",null,"Resource Limits"),(0,o.createElementVNode)("p",{class:"text-muted small"},"Maximum resources that the VM can consume")])],-1)),(0,o.createElementVNode)("div",$,[(0,o.createElementVNode)("div",j,[(0,o.createVNode)(i,{value:n.cpuLimit,"onUpdate:value":t[5]||(t[5]=e=>n.cpuLimit=e),mode:a.mode,label:"CPU Limit",placeholder:"1",tooltip:"CPU limit in cores (e.g. 1) or millicores (e.g. 1000m)"},null,8,["value","mode"])]),(0,o.createElementVNode)("div",W,[(0,o.createVNode)(i,{value:n.memoryLimit,"onUpdate:value":t[6]||(t[6]=e=>n.memoryLimit=e),mode:a.mode,label:"Memory Limit",placeholder:"1Gi",tooltip:"Memory limit (e.g. 512Mi, 2Gi)"},null,8,["value","mode"])])])])}var Q={name:"VMResourcesConfig",components:{LabeledInput:k.LabeledInput,LabeledSelect:L.A},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},rules:{type:Function,default:()=>[]}},data(){return{memoryUnits:[{label:"Mi",value:"Mi"},{label:"Gi",value:"Gi"},{label:"Ti",value:"Ti"}]}},computed:{isView(){return"view"===this.mode},cpuCores:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.cpu.cores")||1},set(e){const t=parseFloat(e);(0,h.hZ)(this.value,"spec.template.spec.domain.cpu.cores",isNaN(t)?1:t)}},memoryValue:{get(){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.memory.guest");return e?e.toString().replace(/[A-Za-z]/g,""):""},set(e){const t=this.memoryUnit||"Gi";e&&""!==e?(0,h.hZ)(this.value,"spec.template.spec.domain.memory.guest",`${e}${t}`):(0,h.hZ)(this.value,"spec.template.spec.domain.memory.guest","")}},memoryUnit:{get(){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.memory.guest");return e&&e.toString().replace(/[0-9]/g,"")||"Gi"},set(e){const t=this.memoryValue;t&&""!==t&&(0,h.hZ)(this.value,"spec.template.spec.domain.memory.guest",`${t}${e}`)}},cpuRequest:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.resources.requests.cpu")||""},set(e){if(e)(0,h.hZ)(this.value,"spec.template.spec.domain.resources.requests.cpu",e);else{const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources.requests")||{};if(delete e.cpu,0===Object.keys(e).length){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources")||{};delete e.requests,(0,h.hZ)(this.value,"spec.template.spec.domain.resources",e)}}}},memoryRequest:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.resources.requests.memory")||""},set(e){if(e)(0,h.hZ)(this.value,"spec.template.spec.domain.resources.requests.memory",e);else{const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources.requests")||{};if(delete e.memory,0===Object.keys(e).length){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources")||{};delete e.requests,(0,h.hZ)(this.value,"spec.template.spec.domain.resources",e)}}}},cpuLimit:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.resources.limits.cpu")||""},set(e){if(e)(0,h.hZ)(this.value,"spec.template.spec.domain.resources.limits.cpu",e);else{const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources.limits")||{};if(delete e.cpu,0===Object.keys(e).length){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources")||{};delete e.limits,(0,h.hZ)(this.value,"spec.template.spec.domain.resources",e)}}}},memoryLimit:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.resources.limits.memory")||""},set(e){if(e)(0,h.hZ)(this.value,"spec.template.spec.domain.resources.limits.memory",e);else{const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources.limits")||{};if(delete e.memory,0===Object.keys(e).length){const e=(0,h.Jt)(this.value,"spec.template.spec.domain.resources")||{};delete e.limits,(0,h.hZ)(this.value,"spec.template.spec.domain.resources",e)}}}}},methods:{}};a(51864);const Y=(0,q.A)(Q,[["render",K],["__scopeId","data-v-3326ab0b"]]);var H=Y;const X={key:0,class:"row mb-20"},ee={class:"row mb-10"},te={class:"col span-12"},ae={class:"row mb-10"},oe={class:"col span-6"},se={class:"col span-6"},le={key:0,class:"row mb-10"},ne={class:"col span-6"},ie={class:"col span-6"},re={class:"row mb-10"},ce={class:"col span-6"},de={class:"col span-6"},me={class:"row mb-10"},ue={class:"col span-12"},pe=["onClick"],ve={key:1,class:"section-divider"},he={class:"row"},ke={class:"col span-12"};function be(e,t,a,s,l,n){const i=(0,o.resolveComponent)("LabeledInput"),r=(0,o.resolveComponent)("LabeledSelect");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"row mb-20"},[(0,o.createElementVNode)("div",{class:"col span-12"},[(0,o.createElementVNode)("h3",null,"Network Configuration"),(0,o.createElementVNode)("p",{class:"text-muted"},"Configure network interfaces for the virtual machine (optional)")])],-1)),0===l.localNetworkConfigs.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",X,t[1]||(t[1]=[(0,o.createElementVNode)("div",{class:"col span-12"},[(0,o.createElementVNode)("div",{class:"empty-state"},[(0,o.createElementVNode)("p",{class:"text-muted"},' No network interfaces configured. Click "Add Network Interface" to configure networking. ')])],-1)]))):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.localNetworkConfigs,((e,s)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:`network-${s}`,class:"network-config mb-20"},[(0,o.createElementVNode)("div",ee,[(0,o.createElementVNode)("div",te,[(0,o.createElementVNode)("h4",null,"Network "+(0,o.toDisplayString)(s+1),1)])]),(0,o.createElementVNode)("div",ae,[(0,o.createElementVNode)("div",oe,[(0,o.createVNode)(i,{modelValue:l.localNetworkConfigs[s].name,"onUpdate:modelValue":e=>l.localNetworkConfigs[s].name=e,mode:a.mode,label:"Interface Name",placeholder:"default",onInput:n.syncToModel},null,8,["modelValue","onUpdate:modelValue","mode","onInput"])]),(0,o.createElementVNode)("div",se,[(0,o.createVNode)(r,{value:l.localNetworkConfigs[s].networkType,"onUpdate:value":[e=>l.localNetworkConfigs[s].networkType=e,e=>n.onNetworkTypeChange(s,e)],mode:a.mode,options:l.networkTypes,label:"Network Type",reduce:e=>e.value},null,8,["value","onUpdate:value","mode","options","reduce"])])]),"multus"===e.networkType?((0,o.openBlock)(),(0,o.createElementBlock)("div",le,[(0,o.createElementVNode)("div",ne,[(0,o.createVNode)(r,{value:l.localNetworkConfigs[s].networkName,"onUpdate:value":[e=>l.localNetworkConfigs[s].networkName=e,e=>n.updateNetworkSelection(s,e)],mode:a.mode,options:n.availableNetworkAttachments,label:"Network Selection",placeholder:"Select network option",reduce:e=>e.value},null,8,["value","onUpdate:value","mode","options","reduce"])]),(0,o.createElementVNode)("div",ie,[(0,o.createVNode)(i,{modelValue:l.localNetworkConfigs[s].networkName,"onUpdate:modelValue":e=>l.localNetworkConfigs[s].networkName=e,mode:a.mode,label:"Network Attachment Name",placeholder:"Enter or confirm NAD name",onInput:n.syncToModel},null,8,["modelValue","onUpdate:modelValue","mode","onInput"]),t[2]||(t[2]=(0,o.createElementVNode)("div",{style:{"font-size":"12px",color:"#666","margin-top":"5px"}}," Enter the exact name of the NetworkAttachmentDefinition ",-1))])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",re,[(0,o.createElementVNode)("div",ce,[(0,o.createVNode)(r,{value:l.localNetworkConfigs[s].interfaceType,"onUpdate:value":[e=>l.localNetworkConfigs[s].interfaceType=e,n.syncToModel],mode:a.mode,options:l.interfaceTypes,label:"Interface Type",reduce:e=>e.value},null,8,["value","onUpdate:value","mode","options","reduce"])]),(0,o.createElementVNode)("div",de,[(0,o.createVNode)(i,{modelValue:l.localNetworkConfigs[s].macAddress,"onUpdate:modelValue":e=>l.localNetworkConfigs[s].macAddress=e,mode:a.mode,label:"MAC Address",placeholder:"02:00:00:00:00:00",onInput:n.syncToModel},null,8,["modelValue","onUpdate:modelValue","mode","onInput"])])]),(0,o.createElementVNode)("div",me,[(0,o.createElementVNode)("div",ue,[!n.isView&&l.localNetworkConfigs.length>1?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-link",onClick:e=>n.removeNetwork(s)}," Remove Network Interface ",8,pe)):(0,o.createCommentVNode)("",!0)])]),s<l.localNetworkConfigs.length-1?((0,o.openBlock)(),(0,o.createElementBlock)("hr",ve)):(0,o.createCommentVNode)("",!0)])))),128)),(0,o.createElementVNode)("div",he,[(0,o.createElementVNode)("div",ke,[n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-tertiary",onClick:t[0]||(t[0]=(...e)=>n.addNetwork&&n.addNetwork(...e))}," Add Network Interface "))])])])}var ge={name:"VMNetworkConfig",components:{LabeledInput:k.LabeledInput,LabeledSelect:L.A},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{interfaceTypes:[{label:"masquerade",value:"masquerade"},{label:"bridge",value:"bridge"},{label:"sriov",value:"sriov"}],networkTypes:[{label:"Pod Network",value:"pod"},{label:"Multus",value:"multus"}],localNetworkConfigs:[]}},computed:{isView(){return"view"===this.mode},availableNetworkAttachments(){return[{label:"Select network attachment...",value:""},{label:"Create new NAD (enter name below)",value:"new"},{label:"bridge-network",value:"bridge-network"},{label:"macvlan-network",value:"macvlan-network"},{label:"sriov-network",value:"sriov-network"},{label:"ovs-network",value:"ovs-network"}]},networks:{get(){return(0,h.Jt)(this.value,"spec.template.spec.networks")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.networks",e)}},interfaces:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.devices.interfaces")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.domain.devices.interfaces",e)}}},methods:{getNetworkType(e){return e.pod?"pod":e.multus?"multus":"pod"},getInterfaceType(e){return e.masquerade?"masquerade":e.bridge?"bridge":e.sriov?"sriov":"masquerade"},loadNetworkConfigs(){const e=this.networks,t=this.interfaces;this.localNetworkConfigs=e.map((e=>{const a=t.find((t=>t.name===e.name))||{},o=this.getNetworkType(e);return{name:e.name||"",networkType:o,networkName:e.multus?.networkName||"",interfaceType:this.getInterfaceType(a),macAddress:a.macAddress||""}}))},syncToModel(){const e=[],t=[];this.localNetworkConfigs.forEach((a=>{if(a.name){const o={name:a.name};switch(a.networkType){case"pod":o.pod={};break;case"multus":a.networkName&&(o.multus={networkName:a.networkName});break}e.push(o);const s={name:a.name};switch(a.interfaceType){case"masquerade":s.masquerade={};break;case"bridge":s.bridge={};break;case"sriov":s.sriov={};break}a.macAddress&&(s.macAddress=a.macAddress),t.push(s)}})),this.networks=e,this.interfaces=t},onNetworkTypeChange(e,t){this.localNetworkConfigs[e]&&(this.localNetworkConfigs[e].networkType=t,"pod"===t&&(this.localNetworkConfigs[e].networkName=""),this.syncToModel())},updateNetworkField(e,t,a){this.localNetworkConfigs[e]&&(this.localNetworkConfigs[e][t]=a,"networkType"===t&&"pod"===a&&(this.localNetworkConfigs[e].networkName=""),this.syncToModel())},updateNetworkSelection(e,t){this.localNetworkConfigs[e]&&void 0!==t&&("new"!==t&&""!==t&&(this.localNetworkConfigs[e].networkName=t),this.syncToModel())},addNetwork(){const e=`net${this.localNetworkConfigs.length+1}`;this.localNetworkConfigs.push({name:e,networkType:"pod",networkName:"",interfaceType:"masquerade",macAddress:""}),this.syncToModel()},removeNetwork(e){e<this.localNetworkConfigs.length&&(this.localNetworkConfigs.splice(e,1),this.syncToModel())}},created(){this.loadNetworkConfigs(),0===this.localNetworkConfigs.length&&"create"!==this.mode&&this.addNetwork()},watch:{"value.spec.template.spec.networks":{handler(){this.loadNetworkConfigs()},deep:!0},"value.spec.template.spec.domain.devices.interfaces":{handler(){this.loadNetworkConfigs()},deep:!0}}};a(98021);const Ne=(0,q.A)(ge,[["render",be],["__scopeId","data-v-cef06128"]]);var fe=Ne;const ye={key:0,class:"text-center"},Ve={class:"row mb-10"},Ce={class:"col span-12"},we={class:"row mb-10"},Ee={class:"col span-4"},Me={class:"col span-4"},De={class:"col span-4"},xe={key:0,class:"row mb-10"},Ie={class:"col span-12"},Te={key:0,class:"mt-5"},Be={key:1,class:"row mb-10"},Ae={class:"col span-12"},Ue={key:0,class:"mt-10"},Le={key:1,class:"mt-5"},Se={class:"selected-image"},qe={key:2,class:"mt-5"},Ze={class:"selected-image"},_e={key:2,class:"row mb-10"},Re={class:"col span-12"},Je={key:0,class:"mt-5"},Oe={key:3,class:"row mb-10"},Pe={class:"col span-12"},Ge={key:0,class:"mt-5"},Fe={key:4,class:"row mb-10"},ze={class:"col span-6"},$e={key:5,class:"row mb-10"},je={class:"col span-12"},We={class:"cloud-init-editor"},Ke={class:"row mb-10"},Qe={class:"col span-12"},Ye=["onClick"],He={key:6,class:"section-divider"},Xe={class:"row"},et={class:"col span-12"};function tt(e,t,a,s,l,n){const i=(0,o.resolveComponent)("LabeledInput"),r=(0,o.resolveComponent)("LabeledSelect"),c=(0,o.resolveComponent)("CodeMirror");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[t[7]||(t[7]=(0,o.createElementVNode)("div",{class:"row mb-20"},[(0,o.createElementVNode)("div",{class:"col span-12"},[(0,o.createElementVNode)("h3",null,"Disks & Volumes"),(0,o.createElementVNode)("p",{class:"text-muted"},"Configure storage volumes for the virtual machine")])],-1)),l.loading?((0,o.openBlock)(),(0,o.createElementBlock)("div",ye,"Loading resources...")):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.localDiskConfigs,((e,s)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:`disk-${s}`,class:"disk-config mb-20"},[(0,o.createElementVNode)("div",Ve,[(0,o.createElementVNode)("div",Ce,[(0,o.createElementVNode)("h4",null,"Disk "+(0,o.toDisplayString)(s+1),1)])]),(0,o.createElementVNode)("div",we,[(0,o.createElementVNode)("div",Ee,[(0,o.createVNode)(i,{value:l.localDiskConfigs[s].name,mode:a.mode,label:"Disk Name",placeholder:"rootdisk",onInput:e=>n.updateDiskField(s,"name",e)},null,8,["value","mode","onInput"])]),(0,o.createElementVNode)("div",Me,[(0,o.createVNode)(r,{value:e.bus,"onUpdate:value":[t=>e.bus=t,e=>n.updateDiskField(s,"bus",e)],mode:a.mode,options:l.busTypes,label:"Disk Bus",reduce:e=>e.value},null,8,["value","onUpdate:value","mode","options","reduce"])]),(0,o.createElementVNode)("div",De,[(0,o.createVNode)(r,{mode:a.mode,options:l.volumeTypes,label:"Volume Type",value:e.volumeType,"onUpdate:value":[t=>e.volumeType=t,e=>n.updateDiskField(s,"volumeType",e)],reduce:e=>e.value},null,8,["mode","options","value","onUpdate:value","reduce"])])]),"pvc"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",xe,[(0,o.createElementVNode)("div",Ie,[(0,o.createVNode)(r,{mode:a.mode,options:n.pvcOptions,label:"PVC",value:e.pvcName,"onUpdate:value":[t=>e.pvcName=t,e=>n.updateDiskField(s,"pvcName",e)],reduce:e=>e.value},null,8,["mode","options","value","onUpdate:value","reduce"]),e.pvcName?((0,o.openBlock)(),(0,o.createElementBlock)("div",Te,[t[1]||(t[1]=(0,o.createTextVNode)(" Selected PVC: ")),(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(e.pvcName),1)])):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0),"containerDisk"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",Be,[(0,o.createElementVNode)("div",Ae,[(0,o.createVNode)(r,{mode:a.mode,options:l.containerDiskImages,label:"Container Image",value:e.containerImage,"onUpdate:value":[t=>e.containerImage=t,e=>n.updateDiskField(s,"containerImage",e)],reduce:e=>e.value},null,8,["mode","options","value","onUpdate:value","reduce"]),"custom"===e.containerImage?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ue,[(0,o.createVNode)(i,{mode:a.mode,value:l.localDiskConfigs[s].customImage,"onUpdate:value":e=>l.localDiskConfigs[s].customImage=e,label:"Custom Container Image",placeholder:"registry.example.com/my-vm-image:latest",onInput:e=>n.updateDiskField(s,"customImage",e)},null,8,["mode","value","onUpdate:value","onInput"])])):(0,o.createCommentVNode)("",!0),e.containerImage&&"custom"!==e.containerImage?((0,o.openBlock)(),(0,o.createElementBlock)("div",Le,[(0,o.createElementVNode)("div",Se,[t[2]||(t[2]=(0,o.createElementVNode)("strong",null,"Selected:",-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.containerImage),1)])])):(0,o.createCommentVNode)("",!0),"custom"===e.containerImage&&l.localDiskConfigs[s].customImage?((0,o.openBlock)(),(0,o.createElementBlock)("div",qe,[(0,o.createElementVNode)("div",Ze,[t[3]||(t[3]=(0,o.createElementVNode)("strong",null,"Custom:",-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(l.localDiskConfigs[s].customImage),1)])])):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0),"secret"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",_e,[(0,o.createElementVNode)("div",Re,[(0,o.createVNode)(r,{mode:a.mode,options:n.secretOptions,label:"Secret",value:e.secretName,"onUpdate:value":[t=>e.secretName=t,e=>n.updateDiskField(s,"secretName",e)],reduce:e=>e.value},null,8,["mode","options","value","onUpdate:value","reduce"]),e.secretName?((0,o.openBlock)(),(0,o.createElementBlock)("div",Je,[t[4]||(t[4]=(0,o.createTextVNode)(" Selected Secret: ")),(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(e.secretName),1)])):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0),"configMap"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",Oe,[(0,o.createElementVNode)("div",Pe,[(0,o.createVNode)(r,{mode:a.mode,options:n.configMapOptions,label:"ConfigMap",value:e.configMapName,"onUpdate:value":[t=>e.configMapName=t,e=>n.updateDiskField(s,"configMapName",e)],reduce:e=>e.value},null,8,["mode","options","value","onUpdate:value","reduce"]),e.configMapName?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ge,[t[5]||(t[5]=(0,o.createTextVNode)(" Selected ConfigMap: ")),(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(e.configMapName),1)])):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0),"emptyDir"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",Fe,[(0,o.createElementVNode)("div",ze,[(0,o.createVNode)(i,{value:l.localDiskConfigs[s].size,"onUpdate:value":e=>l.localDiskConfigs[s].size=e,mode:a.mode,label:"Size",placeholder:"10Gi",onInput:e=>n.updateDiskField(s,"size",e)},null,8,["value","onUpdate:value","mode","onInput"])])])):(0,o.createCommentVNode)("",!0),"cloudInit"===e.volumeType?((0,o.openBlock)(),(0,o.createElementBlock)("div",$e,[(0,o.createElementVNode)("div",je,[t[6]||(t[6]=(0,o.createElementVNode)("label",{class:"text-label"},"Cloud-Init Configuration",-1)),(0,o.createElementVNode)("div",We,[(0,o.createVNode)(c,{ref_for:!0,ref:`cloudInitEditor${s}`,value:l.localDiskConfigs[s].userData||"#cloud-config\n",mode:a.mode,"show-key-map-box":!0,options:{mode:"yaml",lint:!0,lineNumbers:!0,lineWrapping:!0,tabSize:2,indentWithTabs:!1,viewportMargin:1/0},onOnInput:e=>n.updateDiskField(s,"userData",e),onOnReady:()=>n.refreshCodeMirror(s)},null,8,["value","mode","onOnInput","onOnReady"])])])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",Ke,[(0,o.createElementVNode)("div",Qe,[n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-link",onClick:e=>n.removeDisk(s)}," Remove Disk ",8,Ye))])]),s<l.localDiskConfigs.length-1?((0,o.openBlock)(),(0,o.createElementBlock)("hr",He)):(0,o.createCommentVNode)("",!0)])))),128)),(0,o.createElementVNode)("div",Xe,[(0,o.createElementVNode)("div",et,[n.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-tertiary",onClick:t[0]||(t[0]=(...e)=>n.addDisk&&n.addDisk(...e))}," Add Disk "))])])])}var at=a(65359),ot=a(21696),st=a(4364),lt={name:"VMDiskConfig",components:{LabeledInput:k.LabeledInput,LabeledSelect:L.A,CodeMirror:ot.A},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{busTypes:[{label:"virtio",value:"virtio"},{label:"sata",value:"sata"},{label:"scsi",value:"scsi"}],volumeTypes:[{label:"PVC",value:"pvc"},{label:"Container Disk",value:"containerDisk"},{label:"ConfigMap",value:"configMap"},{label:"Secret",value:"secret"},{label:"EmptyDir",value:"emptyDir"},{label:"Cloud-Init",value:"cloudInit"}],containerDiskImages:[{label:"Select a pre-built image...",value:""},{label:"CirrOS Demo",value:"quay.io/kubevirt/cirros-container-disk-demo:latest"},{label:"Fedora Cloud",value:"quay.io/kubevirt/fedora-cloud-container-disk-demo:latest"},{label:"Alpine Linux",value:"quay.io/kubevirt/alpine-container-disk-demo:latest"},{label:"Ubuntu Cloud",value:"quay.io/containerdisks/ubuntu:22.04"},{label:"CentOS Stream",value:"quay.io/containerdisks/centos-stream:9"},{label:"Debian",value:"quay.io/containerdisks/debian:12"},{label:"Rocky Linux",value:"quay.io/containerdisks/rockylinux:9"},{label:"openSUSE Leap",value:"quay.io/containerdisks/opensuse:15.5"},{label:"Custom Image",value:"custom"}],localDiskConfigs:[],loading:!1}},computed:{...(0,at.L8)(["currentCluster"]),isView(){return"view"===this.mode},disks:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.devices.disks")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.domain.devices.disks",e)}},volumes:{get(){return(0,h.Jt)(this.value,"spec.template.spec.volumes")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.volumes",e)}},namespace(){return this.value.metadata?.namespace||"default"},pvcs(){try{const e=this.$store.getters["cluster/all"]("persistentvolumeclaim");return e.filter((e=>e.metadata?.namespace===this.namespace))}catch(e){return st.error("Error getting PVCs:",e),[]}},secrets(){try{const e=this.$store.getters["cluster/all"]("secret");return e.filter((e=>e.metadata?.namespace===this.namespace))}catch(e){return st.error("Error getting Secrets:",e),[]}},configMaps(){try{const e=this.$store.getters["cluster/all"]("configmap");return e.filter((e=>e.metadata?.namespace===this.namespace))}catch(e){return st.error("Error getting ConfigMaps:",e),[]}},pvcOptions(){const e=[{label:"Select existing PVC...",value:""}];return this.pvcs.forEach((t=>{e.push({label:t.metadata.name,value:t.metadata.name})})),e},secretOptions(){const e=[{label:"Select existing Secret...",value:""}];return this.secrets.forEach((t=>{e.push({label:t.metadata.name,value:t.metadata.name})})),e},configMapOptions(){const e=[{label:"Select existing ConfigMap...",value:""}];return this.configMaps.forEach((t=>{e.push({label:t.metadata.name,value:t.metadata.name})})),e},containerImageOptions(){return this.containerDiskImages.map((e=>({label:e.label,value:e.value,description:e.description})))}},watch:{namespace:{immediate:!0,handler(e,t){e!==t&&this.loadResources()}}},async created(){await this.loadResources(),this.loadDiskConfigs(),0===this.localDiskConfigs.length&&this.addDisk()},methods:{async loadResources(){if(this.namespace){this.loading=!0;try{await Promise.all([this.$store.dispatch("cluster/findAll",{type:"persistentvolumeclaim",opt:{namespace:this.namespace}}),this.$store.dispatch("cluster/findAll",{type:"secret",opt:{namespace:this.namespace}}),this.$store.dispatch("cluster/findAll",{type:"configmap",opt:{namespace:this.namespace}})])}catch(e){st.error("Error loading namespace resources:",e)}finally{this.loading=!1}}},getVolumeType(e){return e.persistentVolumeClaim?"pvc":e.containerDisk?"containerDisk":e.configMap?"configMap":e.secret?"secret":e.emptyDir?"emptyDir":e.cloudInitNoCloud?"cloudInit":"pvc"},loadDiskConfigs(){const e=this.disks||[],t=this.volumes||[];this.localDiskConfigs=e.map((e=>{const a=t.find((t=>t.name===e.name))||{};return{name:e.name||"",bus:e.disk?.bus||"virtio",volumeType:this.getVolumeType(a),pvcName:a.persistentVolumeClaim?.claimName||"",containerImage:a.containerDisk?.image||"",secretName:a.secret?.secretName||"",configMapName:a.configMap?.name||"",size:a.emptyDir?.sizeLimit||"",userData:a.cloudInitNoCloud?.userData||""}}))},syncToModel(){const e=[],t=[];this.localDiskConfigs.forEach((a=>{if(a.name){const o={name:a.name};let s=!1;switch(a.volumeType){case"pvc":a.pvcName&&(o.persistentVolumeClaim={claimName:a.pvcName},s=!0);break;case"containerDisk":a.containerImage&&(o.containerDisk={image:a.containerImage},s=!0);break;case"secret":const e="custom"===a.containerImage?a.customImage:a.containerImage;e&&(o.containerDisk={image:e},s=!0);break;case"configMap":a.configMapName&&(o.configMap={name:a.configMapName},s=!0);break;case"emptyDir":o.emptyDir={},a.size&&""!==a.size.trim()&&(o.emptyDir.sizeLimit=a.size.trim()),s=!0;break;case"cloudInit":o.cloudInitNoCloud={userData:a.userData||"#cloud-config\n"},s=!0;break}s&&(e.push({name:a.name,disk:{bus:a.bus||"virtio"}}),t.push(o))}})),this.disks=e,this.volumes=t},updateDiskField(e,t,a){this.localDiskConfigs[e]&&(this.localDiskConfigs[e][t]=a,"volumeType"===t&&(this.localDiskConfigs[e].pvcName="",this.localDiskConfigs[e].containerImage="",this.localDiskConfigs[e].customImage="",this.localDiskConfigs[e].secretName="",this.localDiskConfigs[e].configMapName="",this.localDiskConfigs[e].size="",this.localDiskConfigs[e].userData=""),this.syncToModel())},addDisk(){const e=`disk${this.localDiskConfigs.length+1}`;this.localDiskConfigs.push({name:e,bus:"virtio",volumeType:"pvc",pvcName:"",containerImage:"",customImage:"",secretName:"",configMapName:"",size:"",userData:""}),this.syncToModel()},removeDisk(e){e<this.localDiskConfigs.length&&(this.localDiskConfigs.splice(e,1),this.syncToModel())},refreshCodeMirror(e){this.$nextTick((()=>{setTimeout((()=>{const t=this.$refs[`cloudInitEditor${e}`];t&&t.length?t[0].refresh():t&&t.refresh&&t.refresh()}),100)}))}}};a(92837);const nt=(0,q.A)(lt,[["render",tt],["__scopeId","data-v-62786951"]]);var it=nt,rt={name:"CruVirtualMachine",components:{CruResource:c.A,NameNsDescription:u.A,Tabbed:v.A,Tab:p.A,LabeledInput:k.LabeledInput,Checkbox:k.Checkbox,Loading:g.A,VMBasicConfig:_,VMResourcesConfig:H,VMNetworkConfig:fe,VMDiskConfig:it},mixins:[d.A,m.A],props:{mode:{type:String,default:r.YQ},resource:{type:String,default:null},value:{type:Object,required:!0}},emits:["input"],data(){return{fvFormRuleSets:[{path:"metadata.name",rules:["required"]},{path:"spec.template.spec.domain.cpu.cores",rules:["required"]}]}},computed:{tabErrors(){return{basic:this.fvGetPathErrors(["metadata.name"])?.length>0,resources:this.fvGetPathErrors(["spec.template.spec.domain.cpu.cores"])?.length>0||this.fvGetPathErrors(["spec.template.spec.domain.memory.guest"])?.length>0}},editorMode(){return this.isView?b.j.VIEW_CODE:b.j.EDIT_CODE},isView(){return this.mode===r.nW},vmRunning:{get(){const e=(0,h.Jt)(this.value,"spec.runStrategy");return"Always"===e||"RerunOnFailure"===e},set(e){e?(0,h.hZ)(this.value,"spec.runStrategy","Always"):(0,h.hZ)(this.value,"spec.runStrategy","Halted");const t=(0,h.Jt)(this.value,"spec")||{};"running"in t&&delete t.running}},terminationGracePeriod:{get(){return(0,h.Jt)(this.value,"spec.template.spec.terminationGracePeriodSeconds")||30},set(e){(0,h.hZ)(this.value,"spec.template.spec.terminationGracePeriodSeconds",parseInt(e))}},cpuCores:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.cpu.cores")||1},set(e){const t=parseFloat(e);(0,h.hZ)(this.value,"spec.template.spec.domain.cpu.cores",isNaN(t)?1:t)}},memory:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.memory.guest")||"1Gi"},set(e){(0,h.hZ)(this.value,"spec.template.spec.domain.memory.guest",e)}},disks:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.devices.disks")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.domain.devices.disks",e)}},volumes:{get(){return(0,h.Jt)(this.value,"spec.template.spec.volumes")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.volumes",e)}},networks:{get(){return(0,h.Jt)(this.value,"spec.template.spec.networks")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.networks",e)}},interfaces:{get(){return(0,h.Jt)(this.value,"spec.template.spec.domain.devices.interfaces")||[]},set(e){(0,h.hZ)(this.value,"spec.template.spec.domain.devices.interfaces",e)}}},created(){this.initializeDefaults()},methods:{initializeDefaults(){if(this.value.spec||(0,h.hZ)(this.value,"spec",{}),this.mode===r.YQ){void 0===this.value.spec.running&&(0,h.hZ)(this.value,"spec.running",!1),this.value.spec.template||(0,h.hZ)(this.value,"spec.template",{metadata:{labels:{}},spec:{terminationGracePeriodSeconds:30,architecture:"amd64",domain:{cpu:{cores:1},memory:{guest:"1Gi"},devices:{disks:[],interfaces:[]},machine:{type:"q35"}},volumes:[],networks:[]}}),this.value.spec.runStrategy||void 0!==this.value.spec.running||(0,h.hZ)(this.value,"spec.runStrategy","Manual");const e=this.value.metadata?.name;e&&(this.value.spec.template.metadata.labels||(0,h.hZ)(this.value,"spec.template.metadata.labels",{}),this.value.spec.template.metadata.labels["kubevirt.io/domain"]=e)}else this.value.spec.template||(0,h.hZ)(this.value,"spec.template",{metadata:{labels:{}},spec:{}}),this.value.spec.template.metadata||(0,h.hZ)(this.value,"spec.template.metadata",{labels:{}}),this.value.spec.template.metadata.labels||(0,h.hZ)(this.value,"spec.template.metadata.labels",{}),this.value.spec.template.spec||(0,h.hZ)(this.value,"spec.template.spec",{}),this.value.spec.template.spec.domain||(0,h.hZ)(this.value,"spec.template.spec.domain",{devices:{},cpu:{},memory:{}}),this.value.spec.template.spec.domain.devices||(0,h.hZ)(this.value,"spec.template.spec.domain.devices",{disks:[],interfaces:[]}),this.value.spec.template.spec.domain.cpu||(0,h.hZ)(this.value,"spec.template.spec.domain.cpu",{}),this.value.spec.template.spec.domain.memory||(0,h.hZ)(this.value,"spec.template.spec.domain.memory",{}),this.value.spec.template.spec.volumes||(0,h.hZ)(this.value,"spec.template.spec.volumes",[]),this.value.spec.template.spec.networks||(0,h.hZ)(this.value,"spec.template.spec.networks",[])},fvExtraRules(){return[{path:"spec.template.spec.domain.cpu.cores",rules:[e=>{if(!e||""===e||null===e||void 0===e)return"CPU cores is required";const t=parseFloat(e);return isNaN(t)?"CPU cores must be a valid number":t<.1?"CPU cores must be at least 0.1":!(t>32)||"CPU cores cannot exceed 32"}]},{path:"spec.template.spec.domain.memory.guest",rules:[e=>{if(!e||""===e)return"Memory is required";const t=/^(\d+)(Mi|Gi|Ti)$/;if(!t.test(e))return'Memory must be in format like "1Gi", "512Mi", etc.';const a=e.match(t),o=parseInt(a[1]),s=a[2];return"Mi"===s&&(o<128||o>32768)?"Memory must be between 128Mi and 32768Mi":"Gi"===s&&(o<1||o>32)?"Memory must be between 1Gi and 32Gi":!("Ti"===s&&o>1)||"Memory cannot exceed 1Ti"}]}]},onTabChanged({tab:e}){this.$refs[`${e.name}EditorRef`]?.refresh()}},watch:{"value.metadata.name"(e){e&&this.mode===r.YQ&&(this.value.spec.template.metadata.labels||(0,h.hZ)(this.value,"spec.template.metadata.labels",{}),this.value.spec.template.metadata.labels["kubevirt.io/domain"]=e)}}};const ct=(0,q.A)(rt,[["render",i]]);var dt=ct},97503:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),n=a.n(l),i=n()(s());i.push([e.id,"h3[data-v-cd433a6e]{margin-bottom:10px}",""]),t["default"]=i},5861:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),n=a.n(l),i=n()(s());i.push([e.id,"h3[data-v-62786951],h4[data-v-62786951]{margin-bottom:10px}.text-muted[data-v-62786951]{color:var(--muted);font-size:.9em;margin-bottom:15px}.disk-config[data-v-62786951]{border:1px solid var(--border);border-radius:4px;padding:15px;background-color:var(--box-bg)}.section-divider[data-v-62786951]{margin:20px 0;border:none;border-top:1px solid var(--border)}.mt-5[data-v-62786951]{margin-top:5px}.text-label[data-v-62786951]{display:block;color:var(--input-label);font-size:14px;font-weight:400;margin-bottom:5px}.cloud-init-editor[data-v-62786951]{margin-top:5px}.cloud-init-editor[data-v-62786951] .CodeMirror{height:auto!important}.cloud-init-editor[data-v-62786951] .CodeMirror-scroll{max-height:none!important;overflow-y:visible!important}.cloud-init-editor[data-v-62786951] .CodeMirror-sizer{min-height:auto!important}.selected-image[data-v-62786951]{padding:8px 12px;background-color:var(--accent-bg);border:1px solid var(--accent-border);border-radius:4px;font-size:.9em}.selected-image strong[data-v-62786951]{color:var(--accent-text)}.mt-10[data-v-62786951]{margin-top:10px}",""]),t["default"]=i},15557:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),n=a.n(l),i=n()(s());i.push([e.id,"h3[data-v-cef06128],h4[data-v-cef06128]{margin-bottom:10px}.text-muted[data-v-cef06128]{color:var(--muted);font-size:.9em;margin-bottom:15px}.network-config[data-v-cef06128]{border:1px solid var(--border);border-radius:4px;padding:15px;background-color:var(--box-bg)}.section-divider[data-v-cef06128]{margin:20px 0;border:none;border-top:1px solid var(--border)}.empty-state[data-v-cef06128]{padding:20px;text-align:center;background-color:var(--box-bg);border:1px solid var(--border);border-radius:4px}",""]),t["default"]=i},2872:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),n=a.n(l),i=n()(s());i.push([e.id,"h3[data-v-3326ab0b],h4[data-v-3326ab0b]{margin-bottom:10px}.text-muted[data-v-3326ab0b]{color:var(--muted);font-size:.9em;margin-bottom:15px}.text-muted.small[data-v-3326ab0b]{font-size:.8em;margin-bottom:10px}",""]),t["default"]=i},67359:function(e,t,a){var o=a(97503);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("2a026168",o,!0,{sourceMap:!1,shadowMode:!1})},92837:function(e,t,a){var o=a(5861);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("0ce7b9b1",o,!0,{sourceMap:!1,shadowMode:!1})},98021:function(e,t,a){var o=a(15557);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("7df8aa7c",o,!0,{sourceMap:!1,shadowMode:!1})},51864:function(e,t,a){var o=a(2872);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("120a2ec0",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=kubevirt-dashboard-extension-303.0.2+up1.3.2.umd.min.edit.js.map